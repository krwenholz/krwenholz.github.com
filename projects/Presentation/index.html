<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

    <title>Where's my Ferry?</title>

    <meta name="description" content="Support Vector Machines for Modeling
      Ferry Tardiness">
		<meta name="author" content="Kyle R. Wenholz">
    
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/custom.css" id="theme">

    <link rel="stylesheet" href="css/font-awesome.css">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>
	<body>
      <div class="reveal">
      <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">
          <section data-markdown>
            <h2>Where's my Ferry?</h2>
            <h3>Support Vector Machines for </br> Modeling Ferry Tardiness</h3>
            <p>
            <small>By Kyle Wenholz 
              </br>Advised by Professor Brad Richards
              </br> Thanks a ton, Brad.
            </small>
            </p>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## Project goals
            ### Attack a messy problem
            ### Learn some _practical_ AI
            ### Work with big data
            <img src="images/correlation.png">
          </script>
          <aside class="notes">
          I want to talk about my major goals for the project.
          </aside>
          </section>

          <section>
          <image height="70%" width="70%" src="images/ferry.jpg">
          </section>

         
          <section data-markdown>
          <script type="text/template">
            ## All the parts of a good time 
              * <p class="fragment roll-in">Hyperplanes</p>
              * <p class="fragment roll-in">Ferries</p>
              * <p class="fragment roll-in">Big (messy) data</p>
              * <p class="fragment roll-in">Tardiness</p>
            </script>
          <aside class="notes">
            This is an introduction slide.  I just need to quickly go over
            who I worked with, that I wanted to learn about AI in practical 
            situations and do something real with real data, what my project 
            was (Senior Project/Thesis), what's the problem, and what my 
            solution was.
          </aside>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## Classification as a model
            * Tardy or not
            * Features are intuitive
                - Route
                - Vessel
                - Weather
            * Hyperplanes are (mostly) intuitive
          </script>
          <aside class="notes">
            Discuss the major benefits of SVM for my project: features, 
            the drawing analogy, use for big data. 
          </aside>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## Common uses of </br>classification
            * Spam
            * Cancer
            * Facial recognition
            * Airplane traffic
            <img style="float:right;margin:4px;"width="50%" height="50%" 
            src="images/male-female.png">
          </script>
          <aside class="notes">
            (email, cancer pictures, use in a paper regarding 
            airlines) 

            A 2008 paper discussed the use of SVM for predicting a sort of 
            "bad day" for air traffic control (weather based mostly).  
            78% accurate on predicting need to use some sort of software 
            and 83% for predicting delays in air traffic.  They used a 
            super computer.
          <aside>
          </section>
          
          <section data-markdown>
          <script type="text/template">
            ## Ho! An example!
            <img src="images/basic_svm_data.png">
          </script>
          <aside class="notes">
            2. What an SVM is
                1. How an SVM works
                2. How it relates to the ferry problem
                    1. Separating late as >3 minutes past estimate
                    2. The data as points in >33 space
                3. The complication of fitting such a curve
          </aside>
          </section>


          <section data-markdown>
          <script type="text/template">
            ## Linear classifiers
            * Feature vector
            * Weight vector (line, plane, hyperplane)
            * Sign of dot product is the "class"
          </script>
          </section>

         <section data-markdown>
          <script type="text/template">
            ## Feature Vectors
                 Time (seconds),
                 Humidity (percent),
                 Temperature (F),
                 Wind Speed (mph),
                 Wind Direction (degrees off N),
                 Vessel Name,
                 Route Name

                 360
                 10,
                 3,
                 6,
                 17,
                 USS Enterprise,
                 Pt. D/Tahlequah

            Two of these are not like the others.
          </script>
          <aside class="notes">
          </aside>
          </section>

         <section data-markdown>
          <script type="text/template">
            ## Categorical to numeric
                USS Enterprise,
                S.S. Minnow,
                Millenium Falcon,
                Death Star
            
            An average trip for Han Solo:

                0,
                0,
                1,
                0

          </script>
          <aside class="notes">
          </aside>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## WOAH! 
            ## How do we get the weights?
          </script>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## Learning with </br>Support Vector Machines 
            * Training data
              - Mix of both classes
              - "Big"
            * A machine to train the weight vector
              - Draws those lines many times
              - Knows when to stop
            * Mighty hardware to do the calculations
              - Exponentially difficult
              - Long running process
          </script>
          <aside class="notes">
          </aside>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## How will we know it works?
            ### Test data for validation
            - Disjoint from training data
            - Mix of both classes
            - Also "big"
           </script>
           </section>
          
          <section data-markdown>
          <script type="text/template">
            ## Visualizing an SVM
            <img src="images/Svm_separating_hyperplanes.png">
          </script>
          <aside class="notes">
            2. What an SVM is
                1. How an SVM works
                2. How it relates to the ferry problem
                    1. Separating late as >3 minutes past estimate
                    2. The data as points in >33 space
                3. The complication of fitting such a curve
          </aside>
          </section>


          <section data-markdown>
          <script type="text/template">
            ## A real world problem:
            <img width="50%" height="50%" src="images/tough-separation.png">
          </script>
          <aside class="notes">
          </aside>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## Kernels: bending space
            <img src="images/kernel-machine.png">
          </script>
          <aside class="notes">
          </aside>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## Tuning the kernel
            <img src="images/grid_search.png">
          </script>
          <aside class="notes">
          * Like a brute force search
          * Try many (almost all) possibilities
          * Need to bound it
          * Use model accuracy as a performance metric
          * Measured through cross validation
          </aside>
          </section>

          <section data-markdown>
            <script type="text/template">
              ## Why do we care about ferries?
              ### <p class="fragment roll-in">Popular</p>
              ### <p class="fragment roll-in">Complex</p>
              ### <p class="fragment roll-in">Lots of data</p>
            </script>
            <aside class="notes">
              Talk about what the ferry system is (WSDOT), 
              and how many people use it, how the problem 
              extends.
            </aside>
          </section>
          
          <section >
          <h2> A portrait of the system</h2>
          <table>
            <tr>
              <td style="vertical-align:middle;">
                <ul>
                  <li> Established in 1951</li>
                  <li> 22 million passengers per year</li>
                  <li> 20 terminals, 10 routes, 23 vessels</li>
                  <li> Largest ferry system in the world for vehicles</li>
                  <li> From Victoria to Pt. Defiance (~130 miles)</li>
                  <li> 159,811 sailings in 2012 (12,764 in December)</li>
                  <li> Almost 10,000,000 vehicles in 2011</li>
                </ul>
              </td>
              <td valign="bottom">
                <img width="110%" 
                src="images/route-map-overview.gif" align="right">
              </td>
            </tr>
          </table>
          <aside class="notes">
            Go over the details of the ferry system.
            1. history
            1. Boats
            2. # Of trips per day
            3. Routes
            4. Places serviced
            6. Design and planning
            7. Resources for travelers
              1. Vessel Watch
              2. Pamphlets
              3. General knowledge
              4. Email alerts
            * Mention that ~95% of boats are on time.  This poses some interesting
              questions about what we can actually learn.

            96.4% on time 
            Best: Pt. Defiance/Tahlequah and Edmonds/Kingston (99.5%)
            Worst: Anacortes/San Juans (88.9%)
          </aside>
          </section>
          
          <section data-markdown>
          <script type="text/template">
            ## Sources and shades of data
            * <p class="fragment roll-in">Scraping web pages</p>
            * <p class="fragment roll-in">WSDOT VesselWatch</p>
            * <p class="fragment roll-in">NOAA Tacoma Narrows weather station</p>
            <img src="images/vesselwatch.png">
            </script>
          <aside class="notes">
            1. Accessibility of the Vessel Watch data
                1. Briefly discuss the web page scraper
                    1. Using a simulated web browser
                    2. Accounting for "botched" grabs
                2. Using a request for the data
                    1. Discuss what I actually received
                    2. Discuss the quality and amount of data
            2. Grabbing weather data
                1. Grabbed from a deeply hidden NOAA archive
                2. Manually downloaded files
                3. Why the Tacoma Narrows station
                    1. Completeness of dates
                    2. Completeness of records
          </aside>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## Ferry data (340,902)
                Kittitas, Mukilteo, Clinton, 9/1/2010 0:00, 9/1/2010 0:01,
                Mukilteo - Clinton, 9/1/2010 0:13, 9/1/2010 0:14, 9/1/2010

            </br>
            ## Weather data (1184 &times; 24)
                94274,20110101,0053,12,CLR, ,10.00, , , ,25, ,-3.9, ,22, ,-5.4, ,
                16, ,-8.9, , 69, , 0, ,000, , , ,29.69, ,1, ,002, ,30.04, ,AA, , ,
                ,30.03, 
          </script>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## Weather variables 

            <table style="padding: 10px 10px 10px 10px;">
              <tr>
                <td style="padding: 0px 110px 10px 150px;">
                  <ul>
                    <li> Date</li>
                    <li> Time</li>
                    <li> Visibility</li>
                    <li style="text-decoration:underline;" > Dry bulb</li>
                    <li style="text-decoration:underline;" > Wet bulb</li>
                    <li style="text-decoration:underline;" > Dew point</li>
                  </ul>
                </td>
                <td style="vertical-align:top;">
                  <ul>
                    <li> Relative humidity</li>
                    <li style="text-decoration:underline;" > Wind speed</li>
                    <li style="text-decoration:underline;" > Wind direction</li>
                    <li style="text-decoration:underline;" > Station pressure</li>
                    <li> Altimeter</li>
                  </ul>
                </td>
              </tr>
            </table>
          </script>
          <aside class="notes">
          Talk about the many weather variables I got from NOAA.
          </aside>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## Data monsters 
              * Python for everything
              * 1,034 weather recordings missing wind data
              * 13,220 vessel trips removed from lack of weather data (~ 4%)
              * Stages of formatting
                  - Combine all weather data files from NOAA
                  - Join ferry and weather data
                  - Handle categorical variables
                  - Make it all SVMable
          </script>
          <aside class="notes">
            1. Discussion of data quality
              1. Missing values
              2. Ill formatted values
              3. Generally consistent (huge amount so a few mistakes is okay)
            2. Separated into 290,000 for training and 30,000 for testing
            2. Suite of Python scripts to cut out bad data
            3. Scripts to join weather and ferry data
            4. Performance issues encountered
          </aside>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## LibSVM
            Chih-Chung Chang and Chih-Jen Lin

            "Working set selection using second 
            </br>order information for training SVM"

            <image height="40%" width="40%" src="images/chih-jen.gif">
          </script>
          <aside class="notes">
            3. Use of LibSVM
                1. Why not write my own?
                    1. Time
                    2. Correctness
                    3. Performance
                2. Use in other papers/popularity
                3. Ease of use of the library (reasonably documented)
          </aside>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## Goal refresh 
            * Find order in the mess: Which features matter?
            * Do something practical: Can we use the model?
            * Work with big data: Was all of the data necessary/useful?
          </script>
          <aside class="notes">
          >90 accuracy isn't expected!  This would be weird in most cases.
          This is because it can't be perfect, there is a maximum iter 
          threshold, it's optimization, noise is still noise, 

          Mention the 95% accurate fact and how we can basically be correct
          most of the time by guessing on time.  We want a model to be similarly
          accurate.
          </aside>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## SVM is easy right?
            # <p class="fragment roll-in">No. 60%</p>
          </script>
          <aside class="notes">
            WHY DID I DO BETTER???
            1. Accuracy comes from test data (disjoint from train data)
            1. Needing to fit c and gamma parameters to get better curves
            2. Duration of runs and sheer size of data sets
          </aside>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## Results: Arrivals
            *  Full: 87.0%
            *  No Weather: 88.0%
            *  No Departure: 60.0%
            *  No Departure, No Weather: 59.4%
          </script>
          <aside class="notes">
            Full = Departure estimate and actual,
            arrival estimate, vessel name, route, all weather
            1. How do we know it's correct?
                1. Classification versus regression: I want a "useful" machine
                2. Test sets vs. training sets
            2. Review the numbers of the results
                1. Results before param fitting of c and gamma
                1. Departures
                    1. Weather
                    2. No weather
                2. The more interesting: arrivals
                    1. Weather
                    2. No weather
          </aside>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## Results: Departures
            * Full: 76.3%
            * No Weather: 75.7%
          </script>
          <aside class="notes">
            Full = Departure estimate, vessel name, route, all weather
          </aside>
          </section>

          <section data-markdown>
          <script type="text/template">
            <table>
              <tr>
                <td style="vertical-align:middle;horizontal-align:right;">
                  <h3>Too hot </br>Too cold </br>Or just right</h3>
                </td>
                <td style="horizontal-align:right;">
                  <img width="70%" src="images/route-map-overview.gif" align="right">
                </td>
              </tr>
            </table>
          </script>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## How about that weather?
            
            <table style="border-collapse:collapse;">
              <tr>
                <td>
                </td>
                <td>
                  <h3>Arrivals</h3>
                </td>
                <td>
                  <h3>Departures </h3>
                </td>
              </tr>
              <tr>
                <td style="border:1px solid black;padding:10px;">
                  Tahlequah-Point Defiance    
                </td>
                <td style="border:1px solid black;padding:10px;">
                  95.2%/93.9% 
                </td>
                <td style="border:1px solid black;padding:10px;">
                  76.1/75.3%
                </td>
              </tr>
              <tr>
                <td style="border:1px solid black;padding:10px;">
                  Kingston-Edmonds    
                </td>
                <td style="border:1px solid black;padding:10px;">
                  85.2%/94.7%
                </td>
                <td style="border:1px solid black;padding:10px;">
                  82.7%/82.8% 
                </td>
              </tr>
              <tr>
                <td style="border:1px solid black;padding:10px;">
                  Coupeville-Port Townsend    
                </td>
                <td style="border:1px solid black;padding:10px;">
                  88.3%/87.7%
                </td>
                <td style="border:1px solid black;padding:10px;">
                  68.8%/69.4% 
                </td>
              </tr>
            </table>
          </script>
          <aside class="notes">
            Without information about the departure, the arrival time
              predictions were strictly less than 68% accuracy.
            1. Possible issues
                1. Location of station
                2. Poor quality of data
                3. My error
                4. Ferries really are consistent enough to not need weather
            2. Running individual routes
                1. Closest to Tacoma Narrows
                2. Middleish (randomly selected)
                3. Geographically furthest

          </aside>
          </section>

          <section data-markdown>
          <script type="text/template">
            ## In summary
            * This is a "cute" model.
            * Hyperplanes are more than an awesome word.
            * The ferry system is full of data we can mine.
            * SVM is like a black box.

            <image height="50%" width="50%" 
            src="images/Space-Needle_Ferry_Seattle.jpg">
            </script>
          <aside class="notes">
            1. Making an actual application
                1. State of Java web frameworks
                2. Need to scrape or grab user data
                3. Update SVM
            2. Are the schedules online adjusted as time goes by
            3. Mining the data for patterns
          </aside>
          </section>
          
          <section data-markdown>
          <script type="text/template">
            ## Future(ish) work
            * Multi-class SVM for "tardiness categories"
            * Regression analysis
            * Graphical application
          </script>
          <aside class="notes">
          </aside>
          </section>




<!--------------------------------------------------------------------------
        LOADING SCRIPTS AND EXTRAS
--------------------------------------------------------------------------->

		<script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'fade', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
